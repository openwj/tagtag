## 目标
- 以“内置优先、重复封装、功能等价”为准则，对安全、IAM、持久层与通用配置进行统一美化与规范。

## 安全层（framework + auth）
1. 配置注入改造：
- 将 JWT 配置（secret/TTL）改为 `@ConfigurationProperties`（如 `SecurityJwtProperties`），替代零散 `@Value`（JwtService、AuthServiceImpl）。
- 保持已有 `application-*.yml` 的 `security.jwt.*` 配置项，新增 `jwt.secret` 迁移到属性类。
2. Claims 常量化：
- 新增 `kernel.constant.SecurityClaims`，集中定义 `uid/uname/roles/perms/ver/typ`。
- 替换 `AuthServiceImpl`、`TokenFactory`、`TokenVersionFilter` 中的硬编码字符串。
3. 日志与校验统一：
- 控制器沿用 `@Valid` + `jakarta.validation.*`；服务层仅保留必要防御。
- 关键失败分支加轻量 `@Slf4j` 日志（不含敏感信息）。

## IAM 权限聚合与缓存
1. 已提供 `RoleApi.listMenuCodesByRoleIds(List<Long>)` 聚合接口；在 `RoleServiceImpl` 基于一次 SQL 去重返回。
2. 增加 Spring Cache：
- 在 `RoleServiceImpl` 的聚合方法上加 `@Cacheable(cacheNames="roleMenuCodes", key="#roleIds")`。
- 在角色权限变更（`assignMenus`）处加 `@CacheEvict(cacheNames="roleMenuCodes", allEntries=true)`。
- 在 `framework` 或 `start` 添加基础 Cache 配置（如 SimpleCache 或 Caffeine，优先使用 Spring 内置 SimpleCache 以简化）。

## 持久层（MyBatis-Plus）
1. Wrapper 替代 XML：
- 对简单分页/条件查询（如 `RoleMapper.selectPage`）优先使用 MyBatis-Plus Wrapper + `lambdaQuery`，保留复杂 SQL 在 XML。
2. 自动填充统一：
- 已有 `MetaObjectHandlerImpl`；检查实体是否声明 `@TableField(fill=...)`，如缺失统一补齐（createTime/updateTime/createBy/updateBy）。

## 通用封装与 import 统一
1. 移除全限定类名调用：
- 保持通过 import 的简洁写法（如 `PasswordEncoderFactories`、`SecretKeySpec`、集合类型），已在 SecurityConfig、TokenVersionFilter 落地。
2. 工具类复用：
- 保留 `Strings`、`Numbers`；如可由框架类型转换直接处理，则减少冗余使用。

## 测试与验证
- 增补 MockMvc 用例：登录成功/失败、刷新版本校验、注销后旧令牌 401、权限聚合接口。
- 运行 dev profile 验证；全项目编译通过。

## 交付
- 提交批次一的代码改动（包含函数级注释与简洁写法），并附编译与运行验证说明。

请确认按该批次计划执行，我将开始完成上述改造并验证。