spring:
  datasource:
    dynamic:
      primary: master
      datasource:
        master:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://localhost:3306/tagtag-v2?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
          username: root
          password: 123456
    hikari:
      minimum-idle: 1
      initializationFailTimeout: 1
  sql:
    init:
      mode: always  # 或 embedded  默认 never 不执行
      schema-locations:
        - classpath*:db/schema.sql
      data-locations:
        - classpath*:db/data/**.sql
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 5s
      connect-timeout: 3s
      lettuce:
        pool:
          max-active: 8
          max-idle: 4
          min-idle: 1
  cache:
    type: redis
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB


mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    jdbc-type-for-null: 'null'
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

logging:
  level:
    root: info
    com.baomidou.mybatisplus: debug
    org.apache.ibatis: debug

jwt:
  secret: ${JWT_SECRET:change-me-please1234567894563214454545455454545}

security:
  jwt:
    access-ttl-seconds: 3600
    refresh-ttl-seconds: 604800
  permit-paths: /actuator/health,/actuator/info,/api/storage/files/view/**

cache:
  default-ttl: 5m
  ttl:
    roleMenuCodes: 10m
    roleMenus: 10m
    deptTree: 30m
    userById: 10m
    userByUsername: 10m
    menuById: 10m
    menuByCode: 10m
    menusByParent: 5m

management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when_authorized
