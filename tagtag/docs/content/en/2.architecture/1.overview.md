---
title: Architecture Overview
description: High-level overview of the Tagtag architecture.
---

# Architecture Overview

Tagtag adopts a modern architecture with separation of frontend and backend. The frontend handles user interaction and interface display, while the backend is responsible for business logic and data processing. The system is designed with modularity, high cohesion, and low coupling principles for easy extension and maintenance.

## Overall Architecture

### Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Client (Browser)                              │
└─────────────────────────────────────────────────────────────────────────┘
                                    │ HTTPS/HTTP
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Frontend Application (tagtag-ui)             │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────────────┐ │
│  │  Router │  │  Views  │  │Components│  │  State  │  │  API Client     │ │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
                                    │ RESTful API (JSON)
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Backend Application (Spring Boot)            │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────────────┐ │
│  │Controller│  │ Service │  │ Business│  │  Data   │  │ Infrastructure  │ │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Data Storage Layer                           │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                     │
│  │  MySQL  │  │  Redis  │  │  MinIO  │  │Other Storage│                 │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘                     │
└─────────────────────────────────────────────────────────────────────────┘
```

The Tagtag system consists of two main parts:

- **Frontend**: Located in the `tagtag-ui` directory. A modern Single Page Application (SPA) built with Vue 3 + Vite + TypeScript, adopting the Vben Admin 5 framework, and using Tailwind CSS and Shadcn UI for interface development.
- **Backend**: Multiple Java modules located in the root directory. A modular application built with Spring Boot, responsible for providing RESTful APIs and data persistence services.

### Interaction

- **Protocol**: Frontend and backend communicate via HTTP/HTTPS protocol using RESTful API style.
- **Data Format**: JSON is used as the standard data exchange format.
- **Authentication**: Stateless authentication using JWT (JSON Web Token).

### Frontend-Backend Interaction Flow

1. **User Authentication Flow**:
   - User accesses the frontend application, enters username and password
   - Frontend calls the login API, sends authentication request
   - Backend verifies username and password, generates JWT token
   - Frontend stores JWT token, carries token in subsequent requests

2. **API Request Flow**:
   - Frontend initiates API request, carries JWT token
   - Backend filter verifies token validity
   - Controller receives request, calls service layer to process business logic
   - Service layer calls data layer to access database
   - Data layer returns results, service layer encapsulates business response
   - Controller returns JSON response to frontend
   - Frontend processes response, updates interface

3. **WebSocket Real-time Communication** (optional):
   - Frontend establishes WebSocket connection, carries authentication information
   - Backend verifies and establishes connection
   - Both parties exchange real-time data via WebSocket

### Technology Selection Reasons

#### Backend Tech Stack

| Technology | Version | Reason for Selection |
|------------|---------|----------------------|
| Spring Boot | 3.x | Modern Java application development framework, providing auto-configuration, embedded server and other features to simplify development process. |
| Java JDK | 17 | LTS version, providing better performance, security and new feature support. |
| MyBatis Plus | 3.x | Simplifies MyBatis development, provides code generation, pagination plugin, logical deletion and other functions. |
| Redis | 6.x | Used for caching, session management and distributed locks to improve system performance. |
| Spring Security | 6.x | Powerful security framework, supporting JWT authentication and permission control. |
| MySQL | 8.x | Stable and reliable relational database, suitable for storing structured data. |

#### Frontend Tech Stack

| Technology | Version | Reason for Selection |
|------------|---------|----------------------|
| Vue 3 | 3.x | Reactive frontend framework, providing Composition API, better type support and performance. |
| TypeScript | 5.x | Static type checking, improving code quality and development efficiency. |
| Vite | 5.x | Modern frontend build tool, providing fast development experience and optimized production build. |
| Pinia | 2.x | Official state management library for Vue 3, simple and easy to use, supporting TypeScript. |
| Vue Router | 4.x | Official routing management library for Vue, supporting component-level routing and nested routing. |
| Tailwind CSS | 3.x | Utility-first CSS framework, improving style development efficiency, supporting responsive design. |
| Shadcn UI | latest | Customizable UI component library, based on Tailwind CSS, providing modern design style. |
| pnpm | 10.x | Efficient package manager, supporting Monorepo structure, saving disk space and installation time. |

## Backend Architecture

Tagtag backend follows a strict multi-module architecture to separate infrastructure, business logic, and API definitions. This design makes the system's components have clear responsibilities, facilitating maintenance and extension.

### Backend Module Dependencies

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Start Layer (tagtag-start)                   │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Module Layer (tagtag-module-*)               │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
┌─────────────────────────┼─────────────────────────────────────────────────┐
│                           Contract Layer (tagtag-contract-*)           │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
┌─────────────────────────┼─────────────────────────────────────────────────┐
│                           Kernel Layer (tagtag-kernel)                 │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
┌─────────────────────────┼─────────────────────────────────────────────────┐
│                           Framework Layer (tagtag-framework)            │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
┌─────────────────────────┼─────────────────────────────────────────────────┐
│                           Common Layer (tagtag-common)                 │
└─────────────────────────────────────────────────────────────────────────┘
```

### Backend Layered Design

The backend project is organized into the following layers:

#### 1. Common Layer (`tagtag-common`)
Pure utility classes with **no Spring dependencies**.
- Constants
- Exceptions
- Base Models (PageResult, Result)
- Utils (BeanUtils, StringUtils)

#### 2. Framework Layer (`tagtag-framework`)
Infrastructure integration. This layer depends on Spring Boot and other third-party libraries.
- MyBatis Plus Configuration
- Redis Configuration
- Spring Security & JWT
  - JWT Service and Strategy
  - Permission Guards
  - Authentication Context Management
- Global Exception Handling
- Aspect definitions (RateLimit)
- MapStruct Configuration
- Web Configuration (CORS, TraceId)

#### 3. Kernel Layer (`tagtag-kernel`)
Core business support logic.
- Annotations (`@RateLimit`, `@RequirePerm`, `@RequireRole`)
- Enums (Status, Gender)
- Business constants and error codes
- Security-related constants and claims

#### 4. Contract Layer (`tagtag-contract`)
Defines the interface between modules.
- **DTOs**: Data Transfer Objects used for API input/output.
- **API Interfaces**: Java interfaces defining the service contracts.

#### 5. Module Layer (`tagtag-module`)
The actual business implementation.
- Controllers
- Service Implementations
- Entity classes (mapped to Database)
- Mappers

#### 6. Start Layer (`tagtag-start`)
The application entry point. Aggregates all modules and provides configuration files (`application.yml`).

### Backend Module Design Principles

1. **High cohesion, low coupling**: Each module is responsible for only one business domain, and modules communicate through the contract layer.
2. **Dependency inversion**: High-level modules depend on abstractions, not on concrete implementations.
3. **Open-closed principle**: Open for extension, closed for modification.
4. **Single responsibility**: Each class and method is responsible for only one function.
5. **Layered design**: Strictly follow layered architecture, no cross-layer calls.

## Frontend Architecture

Tagtag frontend adopts a modern Monorepo structure, built on **Vben Admin 5** framework, aiming to provide an efficient, scalable frontend development experience.

### Frontend Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Application Layer (apps)                     │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                     │
│  │  Router │  │  Views  │  │Components│  │  State  │                     │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘                     │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Core Package Layer (packages)                │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                     │
│  │  UI Components │  │  Hooks  │  │  Utils   │  │  Services  │         │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘                     │
└─────────────────────────┬─────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           Internal Tools Layer (internal)              │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                     │
│  │  Build Tools │  │Code Style│  │Configuration│  │  Script Tools │     │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘                     │
└─────────────────────────────────────────────────────────────────────────┘
```

### Core Tech Stack

| Technology | Version | Usage |
|------------|---------|-------|
| Vue 3 | 3.x | Reactive frontend framework, providing Composition API. |
| TypeScript | 5.x | Static type checking, improving code quality. |
| Vite | 5.x | Modern frontend build tool, providing fast development experience. |
| Pinia | 2.x | Official state management library for Vue 3. |
| Vue Router | 4.x | Official routing management library for Vue. |
| Tailwind CSS | 3.x | Utility-first CSS framework, improving style development efficiency. |
| Shadcn UI | latest | Customizable UI component library, based on Tailwind CSS. |
| pnpm | 10.x | Efficient package manager, supporting Monorepo structure. |

### Module Division

The frontend project is mainly divided into three layers:

#### 1. Application Layer (`apps`)
Contains specific application implementations, each subdirectory corresponds to an independent frontend application.

- **`apps/tagtag`**: Main application, containing complete business logic and interface.
  - `src/api`: API request definitions and encapsulation.
  - `src/views`: Page view components.
  - `src/router`: Routing configuration and guards.
  - `src/store`: Pinia state management.
  - `src/layouts`: Layout components.
  - `src/components`: Business components.

#### 2. Core Package Layer (`packages`)
Provides reusable core functions and components for the application layer.

- **`packages/@core`**: Core shared library.
  - **`base`**: Basic design system, icons and shared tools.
  - **`ui-kit`**: Encapsulated UI component library.
    - `shadcn-ui`: Basic components based on Shadcn UI.
    - `form-ui`: Form component encapsulation.
    - `layout-ui`: Layout component encapsulation.
    - `popup-ui`: Popup, drawer and other component encapsulation.
  - **`effects`**: Business side effects and logic encapsulation.
    - `access`: Permission control logic.
    - `hooks`: Common Hooks (such as `useTabs`, `useRefresh`).
    - `request`: Request library encapsulation.
    - `plugins`: Third-party plugin integration (Echarts, Motion, Vxe-table).
  - **`preferences`**: Application preference settings management.

#### 3. Internal Tools Layer (`internal`)
Provides tools and configuration for building, development and maintenance.

- **`internal/lint-configs`**: ESLint, Prettier, Stylelint and other code style configuration.
- **`internal/vite-config`**: Vite build configuration encapsulation.
- **`internal/tailwind-config`**: Tailwind CSS configuration encapsulation.
- **`internal/tsconfig`**: TypeScript configuration files.

### Frontend Design Principles

1. **Component-based design**: Split UI into reusable components to improve code reusability.
2. **Separation of concerns**: Separation of business logic, UI display and state management.
3. **Type safety**: Fully utilize TypeScript's type checking.
4. **Responsive design**: Adapt to different screen sizes.
5. **Performance optimization**: Code splitting, lazy loading, virtual scrolling and other optimization methods.
6. **Accessibility**: Ensure the application is accessible to all users, including people with disabilities.
7. **Internationalization support**: Support multi-language switching.

### Monorepo Advantages

1. **Code sharing**: Multiple applications can share components, utility classes and configurations.
2. **Unified dependency management**: All applications use the same version of dependencies, avoiding version conflicts.
3. **Unified build tools**: Shared build configurations and scripts, improving development efficiency.
4. **Better collaboration**: Team members can share and reuse code more conveniently.
5. **Simplified version management**: Unified version number management, simplifying release process.
